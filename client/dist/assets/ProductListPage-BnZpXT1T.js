import{r as o,E as N,b as P,j as t,L as A,z as E,A as L,S as k,q as D}from"./index-DOuJ7_mk.js";import{v as f,C as _}from"./CardProduct-BFBoAtA7.js";const T=()=>{var x,h;const[d,n]=o.useState([]),[y,$]=o.useState(1),[b,g]=o.useState(!1),[z,j]=o.useState(1),s=N(),i=P(e=>e.product.allSubCategory),[v,w]=o.useState([]);console.log(i);const r=(x=s==null?void 0:s.subCategory)==null?void 0:x.split("-"),C=(h=r==null?void 0:r.slice(0,(r==null?void 0:r.length)-1))==null?void 0:h.join(" "),m=s.category.split("-").slice(-1)[0],u=s.subCategory.split("-").slice(-1)[0],S=async()=>{try{g(!0);const e=await L({...k.getProductByCategoryAndSubCategory,data:{categoryId:m,subCategoryId:u,page:y,limit:8}}),{data:a}=e;a.success&&(a.page==1?n(a.data):n([...d,...a.data]),j(a.totalCount))}catch(e){D(e)}finally{g(!1)}};return o.useEffect(()=>{S()},[s]),o.useEffect(()=>{const e=i.filter(a=>{const l=a.category.some(c=>c._id==m);return l||null});w(e)},[s,i]),t.jsx("section",{className:"sticky top-24 lg:top-20",children:t.jsxs("div",{className:"container sticky top-24  mx-auto grid grid-cols-[90px,1fr]  md:grid-cols-[200px,1fr] lg:grid-cols-[280px,1fr]",children:[t.jsx("div",{className:" min-h-[88vh] max-h-[88vh] overflow-y-scroll  grid gap-1 shadow-md scrollbarCustom bg-white py-2",children:v.map((e,a)=>{var c,p;const l=`/${f((c=e==null?void 0:e.category[0])==null?void 0:c.name)}-${(p=e==null?void 0:e.category[0])==null?void 0:p._id}/${f(e.name)}-${e._id}`;return t.jsxs(A,{to:l,className:`w-full p-2 lg:flex items-center lg:w-full lg:h-16 box-border lg:gap-4 border-b 
                  hover:bg-green-100 cursor-pointer
                  ${u===e._id?"bg-green-100":""}
                `,children:[t.jsx("div",{className:"w-fit max-w-28 mx-auto lg:mx-0 bg-white rounded  box-border",children:t.jsx("img",{src:e.image,alt:"subCategory",className:" w-14 lg:h-14 lg:w-12 h-full object-scale-down"})}),t.jsx("p",{className:"-mt-6 lg:mt-0 text-xs text-center lg:text-left lg:text-base",children:e.name})]})})}),t.jsxs("div",{className:"sticky top-20",children:[t.jsx("div",{className:"bg-white shadow-md p-4 z-10",children:t.jsx("h3",{className:"font-semibold",children:C})}),t.jsxs("div",{children:[t.jsx("div",{className:"min-h-[80vh] max-h-[80vh] overflow-y-auto relative",children:t.jsx("div",{className:" grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 p-4 gap-4 ",children:d.map((e,a)=>t.jsx(_,{data:e},e._id+"productSubCategory"+a))})}),b&&t.jsx(E,{})]})]})]})})};export{T as default};
