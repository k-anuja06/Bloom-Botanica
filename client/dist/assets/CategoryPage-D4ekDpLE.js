import{r as i,j as e,A as b,S as j,V as y,q as N,z as S}from"./index-DOuJ7_mk.js";import{a as C}from"./index-Da9-5BbU.js";import{u as v}from"./UploadImage-rzKfwQBb.js";import{N as D}from"./NoData-S5hcdlNa.js";import{C as E}from"./CofirmBox-CqywYNC6.js";import"./nothing here yet-C540yS7h.js";const U=({close:d,fetchData:g})=>{const[s,t]=i.useState({name:"",image:""}),[u,o]=i.useState(!1),m=c=>{const{name:r,value:a}=c.target;t(l=>({...l,[r]:a}))},f=async c=>{if(c.preventDefault(),!(!s.name||!s.image))try{o(!0);const r=await b({...j.addCategory,data:s}),{data:a}=r;a.success&&(y.success(a.message),d(),g())}catch(r){N(r)}finally{o(!1)}},p=async c=>{const r=c.target.files[0];if(r)try{const a=await v(r),{data:l}=a;t(x=>({...x,image:l.data.url}))}catch{y.error("Image upload failed!")}};return e.jsx("section",{className:"fixed top-0 bottom-0 left-0 right-0 p-4 bg-neutral-800 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white max-w-4xl w-full p-4 rounded",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"font-semibold",children:"Category"}),e.jsx("button",{onClick:d,className:"w-fit block ml-auto",children:e.jsx(C,{size:25})})]}),e.jsxs("form",{className:"my-3 grid gap-2",onSubmit:f,children:[e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{htmlFor:"categoryName",children:"Name"}),e.jsx("input",{type:"text",id:"categoryName",placeholder:"Enter category name",value:s.name,name:"name",onChange:m,className:"bg-green-50 p-2 border border-blue-100 focus-within:border-primary-200 outline-none rounded"})]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx("p",{children:"Image"}),e.jsxs("div",{className:"flex gap-4 flex-col lg:flex-row items-center",children:[e.jsx("div",{className:"border bg-green-50 h-36 w-full lg:w-36 flex items-center justify-center rounded",children:s.image?e.jsx("img",{alt:"category",src:s.image,className:"w-full h-full object-scale-down"}):e.jsx("p",{className:"text-sm text-neutral-500",children:"No Image"})}),e.jsxs("label",{htmlFor:"uploadCategoryImage",children:[e.jsx("div",{className:`
                                    ${s.name?"border-primary-200 hover:bg-primary-100":"bg-gray-300"}  
                                    px-4 py-2 rounded cursor-pointer border font-medium
                                `,children:"Upload Image"}),e.jsx("input",{disabled:!s.name,onChange:p,type:"file",id:"uploadCategoryImage",className:"hidden"})]})]})]}),e.jsx("button",{disabled:!s.name||!s.image||u,className:`
                            ${s.name&&s.image?"bg-primary-200 hover:bg-primary-100":"bg-gray-300"}
                            py-2 font-semibold
                        `,children:u?"Adding Category...":"Add Category"})]})]})})},k=({close:d,fetchData:g,data:s})=>{const[t,u]=i.useState({_id:s._id,name:s.name||"",image:s.image||""}),[o,m]=i.useState(!1),f=r=>{const{name:a,value:l}=r.target;u(x=>({...x,[a]:l}))},p=async r=>{if(r.preventDefault(),!t.name||!t.image){y.error("Please fill in all fields.");return}try{m(!0);const a=await b({...j.updateCategory,data:t}),{data:l}=a;l.success&&(y.success(l.message),g==null||g(),d==null||d())}catch(a){N(a)}finally{m(!1)}},c=async r=>{const a=r.target.files[0];if(a)try{m(!0);const l=await v(a),{data:x}=l;u(h=>({...h,image:x.data.url}))}catch{y.error("Image upload failed.")}finally{m(!1)}};return e.jsx("section",{className:"fixed inset-0 z-50 p-4 bg-black bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl p-6 rounded shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-lg font-semibold",children:"Update Category"}),e.jsx("button",{onClick:d,className:"hover:text-red-500",children:e.jsx(C,{size:25})})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{htmlFor:"categoryName",className:"font-medium",children:"Name"}),e.jsx("input",{type:"text",id:"categoryName",name:"name",value:t.name,onChange:f,disabled:o,placeholder:"Enter category name",className:"bg-green-50 p-2 border rounded focus:border-primary-200 outline-none disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"font-medium",children:"Image"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center",children:[e.jsx("div",{className:"h-36 w-full lg:w-36 bg-green-50 border rounded flex items-center justify-center overflow-hidden",children:t.image?e.jsx("img",{src:t.image,alt:"category",title:"Category Image",className:"w-full h-full object-contain"}):e.jsx("span",{className:"text-neutral-500 text-sm",children:"No Image"})}),e.jsxs("label",{htmlFor:"uploadImage",children:[e.jsx("div",{className:`px-4 py-2 rounded font-medium text-center border cursor-pointer transition-colors
                  ${t.name?"border-primary-200 hover:bg-primary-100":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:o?"Uploading...":"Upload Image"}),e.jsx("input",{type:"file",id:"uploadImage",onChange:c,disabled:!t.name||o,className:"hidden"})]})]})]}),e.jsx("button",{type:"submit",disabled:!t.name||!t.image||o,className:`w-full py-2 font-semibold rounded transition-colors
              ${t.name&&t.image&&!o?"bg-primary-200 hover:bg-primary-100":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:o?"Updating...":"Update Category"})]})]})})},$=()=>{const[d,g]=i.useState([]),[s,t]=i.useState(!1),[u,o]=i.useState(!1),[m,f]=i.useState(!1),[p,c]=i.useState(null),[r,a]=i.useState(!1),[l,x]=i.useState(null),h=async()=>{t(!0);try{const n=await b(j.getCategory),{data:w}=n;w.success&&g(w.data)}catch(n){N(n)}finally{t(!1)}},I=async()=>{if(l!=null&&l._id)try{const n=await b({...j.deleteCategory,data:{_id:l._id}});n.data.success&&(y.success(n.data.message),h(),a(!1))}catch(n){N(n)}};return i.useEffect(()=>{h()},[]),e.jsxs("section",{children:[e.jsxs("div",{className:"p-2 bg-white shadow-md flex justify-between items-center",children:[e.jsx("h2",{className:"font-semibold text-lg",children:"Category"}),e.jsx("button",{onClick:()=>o(!0),className:"text-sm border border-primary-200 hover:bg-primary-200 px-3 py-1 rounded",children:"Add Category"})]}),!s&&d.length===0&&e.jsx(D,{}),e.jsx("div",{className:"p-4 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:d.map(n=>e.jsxs("div",{className:"w-32 h-56 rounded shadow-md bg-white flex flex-col items-center justify-between p-2",children:[e.jsx("img",{alt:n.name||"Category",src:n.image,className:"w-full h-32 object-contain",loading:"lazy"}),e.jsx("div",{className:"text-center text-sm font-medium mt-2 truncate w-full",children:n.name}),e.jsxs("div",{className:"flex gap-2 mt-2 w-full",children:[e.jsx("button",{onClick:()=>{f(!0),c(n)},className:"flex-1 bg-green-100 hover:bg-green-200 text-green-600 text-sm py-1 rounded",children:"Edit"}),e.jsx("button",{onClick:()=>{a(!0),x(n)},className:"flex-1 bg-red-100 hover:bg-red-200 text-red-600 text-sm py-1 rounded",children:"Delete"})]})]},n._id))}),s&&e.jsx(S,{}),u&&e.jsx(U,{fetchData:h,close:()=>o(!1)}),m&&p&&e.jsx(k,{data:p,close:()=>f(!1),fetchData:h}),r&&e.jsx(E,{close:()=>a(!1),cancel:()=>a(!1),confirm:I})]})};export{$ as default};
