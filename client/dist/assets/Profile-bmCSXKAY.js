import{b as x,g as b,r as d,j as e,x as g,A as v,S as y,y as N,q as j,V as w,s as A}from"./index-DOuJ7_mk.js";import{a as D}from"./index-Da9-5BbU.js";import{f as E}from"./fetchUserDetails-QRsC0T89.js";const S=({close:a})=>{const o=x(l=>l.user),c=b(),[s,n]=d.useState(!1),h=async l=>{var u;const m=(u=l.target.files)==null?void 0:u[0];if(!m)return;const i=new FormData;i.append("avatar",m);try{n(!0);const r=await v({...y.uploadAvatar,data:i}),{data:t}=r;c(N(t.data.avatar))}catch(r){j(r)}finally{n(!1)}};return e.jsx("section",{className:"fixed inset-0 bg-neutral-900 bg-opacity-60 p-4 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white max-w-sm w-full rounded p-4 relative",children:[e.jsx("button",{onClick:a,className:"absolute top-3 right-3 text-neutral-800",children:e.jsx(D,{size:20})}),e.jsxs("div",{className:"flex flex-col items-center justify-center mt-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 flex items-center justify-center rounded-full overflow-hidden drop-shadow-sm",children:o.avatar?e.jsx("img",{alt:o.name||"User Avatar",src:o.avatar,className:"w-full h-full object-cover"}):e.jsx(g,{size:65})}),e.jsxs("label",{htmlFor:"uploadProfile",className:"mt-4 w-fit",children:[e.jsx("div",{className:`border border-primary-200 px-4 py-1 rounded text-sm cursor-pointer transition ${s?"bg-gray-200 text-neutral-500 cursor-not-allowed":"hover:bg-primary-200"}`,children:s?"Uploading...":"Upload Avatar"}),e.jsx("input",{type:"file",id:"uploadProfile",className:"hidden",onChange:h,disabled:s})]})]})]})})},F=()=>{const a=x(r=>r.user),[o,c]=d.useState(!1),[s,n]=d.useState({name:a.name,email:a.email,mobile:a.mobile}),[h,l]=d.useState(!1),m=b();d.useEffect(()=>{n({name:a.name,email:a.email,mobile:a.mobile})},[a]);const i=r=>{const{name:t,value:p}=r.target;n(f=>({...f,[t]:p}))},u=async r=>{r.preventDefault();try{l(!0);const t=await v({...y.updateUserDetails,data:s}),{data:p}=t;if(p.success){w.success(p.message);const f=await E();m(A(f.data))}}catch(t){j(t)}finally{l(!1)}};return e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"w-20 h-20 bg-red-500 flex items-center justify-center rounded-full overflow-hidden drop-shadow-sm",children:a.avatar?e.jsx("img",{alt:a.name,src:a.avatar,className:"w-full h-full"}):e.jsx(g,{size:65})}),e.jsx("button",{onClick:()=>c(!0),className:"text-sm min-w-20 border border-primary-100 hover:border-primary-200 hover:bg-primary-200 px-3 py-1 rounded-full mt-3",children:"Edit"}),o&&e.jsx(S,{close:()=>c(!1)}),e.jsxs("form",{className:"my-4 grid gap-4",onSubmit:u,children:[e.jsxs("div",{className:"grid",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",placeholder:"Enter your name",className:"p-2 bg-green-50 outline-none border focus-within:border-primary-200 rounded",value:s.name,name:"name",onChange:i,required:!0})]}),e.jsxs("div",{className:"grid",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",placeholder:"Enter your email",className:"p-2 bg-green-50 outline-none border focus-within:border-primary-200 rounded",value:s.email,name:"email",onChange:i,required:!0})]}),e.jsxs("div",{className:"grid",children:[e.jsx("label",{htmlFor:"mobile",children:"Mobile"}),e.jsx("input",{type:"text",id:"mobile",placeholder:"Enter your mobile",className:"p-2 bg-green-50 outline-none border focus-within:border-primary-200 rounded",value:s.mobile,name:"mobile",onChange:i,required:!0})]}),e.jsx("button",{className:"border px-4 py-2 font-semibold hover:bg-primary-100 border-primary-100 text-primary-200 hover:text-neutral-800 rounded",children:h?"Loading...":"Submit"})]})]})};export{F as default};
