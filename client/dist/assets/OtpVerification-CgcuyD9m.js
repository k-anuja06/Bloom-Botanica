import{r as u,u as j,a as v,j as r,L as D,A as N,S as E,V as f,q as A}from"./index-DOuJ7_mk.js";const P=()=>{const[n,i]=u.useState(["","","","","",""]),d=j(),c=u.useRef([]),o=v();u.useEffect(()=>{var a;(a=o==null?void 0:o.state)!=null&&a.email||d("/forgot-password")},[o,d]);const g=n.every(a=>a),p=async a=>{var t,e;a.preventDefault();try{const s=await N({...E.forgot_password_otp_verification,data:{otp:n.join(""),email:(t=o==null?void 0:o.state)==null?void 0:t.email}});s.data.error&&f.error(s.data.message),s.data.success&&(f.success(s.data.message),i(["","","","","",""]),d("/reset-password",{state:{data:s.data,email:(e=o==null?void 0:o.state)==null?void 0:e.email}}))}catch(s){console.log("error",s),A(s)}},h=(a,t)=>{var l;const{value:e}=a.target;if(!/^\d*$/.test(e))return;const s=[...n];s[t]=e,i(s),e&&t<n.length-1&&((l=c.current[t+1])==null||l.focus())},x=(a,t)=>{var e;a.key==="Backspace"&&n[t]===""&&t>0&&((e=c.current[t-1])==null||e.focus())},b=a=>{var m;a.preventDefault();const t=a.clipboardData.getData("Text");if(!/^\d+$/.test(t))return;const e=t.split("").slice(0,n.length),s=[...n];e.forEach((y,w)=>{s[w]=y}),i(s);const l=e.length>=n.length?n.length-1:e.length;(m=c.current[l])==null||m.focus()};return r.jsx("section",{className:"w-full container mx-auto px-2",children:r.jsxs("div",{className:"bg-white my-4 w-full max-w-lg mx-auto rounded p-7",children:[r.jsx("p",{className:"font-semibold text-lg",children:"Enter OTP"}),r.jsxs("form",{className:"grid gap-4 py-4",onSubmit:p,children:[r.jsxs("div",{className:"grid gap-1",children:[r.jsx("label",{htmlFor:"otp",children:"Enter Your OTP :"}),r.jsx("div",{className:"flex items-center gap-2 justify-between mt-3",children:n.map((a,t)=>r.jsx("input",{type:"text",id:"otp",ref:e=>c.current[t]=e,value:a,onChange:e=>h(e,t),onKeyDown:e=>x(e,t),onPaste:b,maxLength:1,className:"bg-green-50 w-full max-w-16 p-2 border rounded outline-none focus:border-primary-200 text-center font-semibold text-lg"},"otp"+t))})]}),r.jsx("button",{disabled:!g,className:`${g?"bg-green-800 hover:bg-green-700":"bg-gray-500"} text-white py-2 rounded font-semibold my-3 tracking-wide`,children:"Verify OTP"})]}),r.jsxs("p",{children:["Already have account? ",r.jsx(D,{to:"/login",className:"font-semibold text-green-700 hover:text-green-800",children:"Login"})]})]})})};export{P as default};
