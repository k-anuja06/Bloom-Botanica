import{r as i,b as y,j as e,z as D,B as R,A as z,S as L,q as P}from"./index-DOuJ7_mk.js";import{u as V}from"./UploadImage-rzKfwQBb.js";import{V as O}from"./ViewImage-C63BDXv2.js";import{a as B}from"./index-kC8JlUgJ.js";import{a as v}from"./index-Da9-5BbU.js";import{A as M,s as T}from"./SuccessAlert-B06Vav86.js";const X=()=>{var j;const[a,o]=i.useState({name:"",image:[],category:[],subCategory:[],unit:"",stock:"",price:"",discount:"",description:"",more_details:{}}),[N,u]=i.useState(!1),[m,p]=i.useState(""),g=y(r=>r.product.allCategory),[C,w]=i.useState(""),[S,F]=i.useState(""),h=y(r=>r.product.allSubCategory),[_,c]=i.useState(!1),[x,b]=i.useState(""),l=r=>{const{name:s,value:n}=r.target;o(t=>({...t,[s]:n}))},I=async r=>{const s=r.target.files[0];if(!s)return;u(!0);const n=await V(s),{data:t}=n,d=t.data.url;o(f=>({...f,image:[...f.image,d]})),u(!1)},A=async r=>{a.image.splice(r,1),o(s=>({...s}))},k=async r=>{a.category.splice(r,1),o(s=>({...s}))},E=async r=>{a.subCategory.splice(r,1),o(s=>({...s}))},U=()=>{o(r=>({...r,more_details:{...r.more_details,[x]:""}})),b(""),c(!1)},q=async r=>{r.preventDefault(),console.log("data",a);try{const s=await z({...L.createProduct,data:a}),{data:n}=s;n.success&&(T(n.message),o({name:"",image:[],category:[],subCategory:[],unit:"",stock:"",price:"",discount:"",description:"",more_details:{}}))}catch(s){P(s)}};return e.jsxs("section",{className:"",children:[e.jsx("div",{className:"p-2   bg-white shadow-md flex items-center justify-between",children:e.jsx("h2",{className:"font-semibold",children:"Upload Product"})}),e.jsx("div",{className:"grid p-3",children:e.jsxs("form",{className:"grid gap-4",onSubmit:q,children:[e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{htmlFor:"name",className:"font-medium",children:"Name"}),e.jsx("input",{id:"name",type:"text",placeholder:"Enter product name",name:"name",value:a.name,onChange:l,required:!0,className:"bg-green-50 p-2 outline-none border focus-within:border-primary-200 rounded"})]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{htmlFor:"description",className:"font-medium",children:"Description"}),e.jsx("textarea",{id:"description",type:"text",placeholder:"Enter product description",name:"description",value:a.description,onChange:l,required:!0,multiple:!0,rows:3,className:"bg-green-50 p-2 outline-none border focus-within:border-primary-200 rounded resize-none"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Image"}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"productImage",className:"bg-green-50 h-24 border rounded flex justify-center items-center cursor-pointer",children:[e.jsx("div",{className:"text-center flex justify-center items-center flex-col",children:N?e.jsx(D,{}):e.jsxs(e.Fragment,{children:[e.jsx(R,{size:35}),e.jsx("p",{children:"Upload Image"})]})}),e.jsx("input",{type:"file",id:"productImage",className:"hidden",accept:"image/*",onChange:I})]}),e.jsx("div",{className:"flex flex-wrap gap-4",children:a.image.map((r,s)=>e.jsxs("div",{className:"h-20 mt-1 w-20 min-w-20 bg-green-50 border relative group",children:[e.jsx("img",{src:r,alt:r,className:"w-full h-full object-scale-down cursor-pointer",onClick:()=>p(r)}),e.jsx("div",{onClick:()=>A(s),className:"absolute bottom-0 right-0 p-1 bg-red-600 hover:bg-red-600 rounded text-white hidden group-hover:block cursor-pointer",children:e.jsx(B,{})})]},r+s))})]})]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{className:"font-medium",children:"Category"}),e.jsxs("div",{children:[e.jsxs("select",{className:"bg-green-50 border w-full p-2 rounded",value:C,onChange:r=>{const s=r.target.value,n=g.find(t=>t._id===s);o(t=>({...t,category:[...t.category,n]})),w("")},children:[e.jsx("option",{value:"",children:"Select Category"}),g.map((r,s)=>e.jsx("option",{value:r==null?void 0:r._id,children:r.name}))]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:a.category.map((r,s)=>e.jsxs("div",{className:"text-sm flex items-center gap-1 bg-green-50 mt-2",children:[e.jsx("p",{children:r.name}),e.jsx("div",{className:"hover:text-red-500 cursor-pointer",onClick:()=>k(s),children:e.jsx(v,{size:20})})]},r._id+s+"productsection"))})]})]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{className:"font-medium",children:"Sub Category"}),e.jsxs("div",{children:[e.jsxs("select",{className:"bg-green-50 border w-full p-2 rounded",value:S,onChange:r=>{const s=r.target.value,n=h.find(t=>t._id===s);o(t=>({...t,subCategory:[...t.subCategory,n]})),F("")},children:[e.jsx("option",{value:"",className:"text-neutral-600",children:"Select Sub Category"}),h.map((r,s)=>e.jsx("option",{value:r==null?void 0:r._id,children:r.name}))]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:a.subCategory.map((r,s)=>e.jsxs("div",{className:"text-sm flex items-center gap-1 bg-green-50 mt-2",children:[e.jsx("p",{children:r.name}),e.jsx("div",{className:"hover:text-red-500 cursor-pointer",onClick:()=>E(s),children:e.jsx(v,{size:20})})]},r._id+s+"productsection"))})]})]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{htmlFor:"unit",className:"font-medium",children:"Unit"}),e.jsx("input",{id:"unit",type:"text",placeholder:"Enter product unit",name:"unit",value:a.unit,onChange:l,required:!0,className:"bg-green-50 p-2 outline-none border focus-within:border-primary-200 rounded"})]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{htmlFor:"stock",className:"font-medium",children:"Number of Stock"}),e.jsx("input",{id:"stock",type:"number",placeholder:"Enter product stock",name:"stock",value:a.stock,onChange:l,required:!0,className:"bg-green-50 p-2 outline-none border focus-within:border-primary-200 rounded"})]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{htmlFor:"price",className:"font-medium",children:"Price"}),e.jsx("input",{id:"price",type:"number",placeholder:"Enter product price",name:"price",value:a.price,onChange:l,required:!0,className:"bg-green-50 p-2 outline-none border focus-within:border-primary-200 rounded"})]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{htmlFor:"discount",className:"font-medium",children:"Discount"}),e.jsx("input",{id:"discount",type:"number",placeholder:"Enter product discount",name:"discount",value:a.discount,onChange:l,required:!0,className:"bg-green-50 p-2 outline-none border focus-within:border-primary-200 rounded"})]}),(j=Object==null?void 0:Object.keys(a==null?void 0:a.more_details))==null?void 0:j.map((r,s)=>e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{htmlFor:r,className:"font-medium",children:r}),e.jsx("input",{id:r,type:"text",value:a==null?void 0:a.more_details[r],onChange:n=>{const t=n.target.value;o(d=>({...d,more_details:{...d.more_details,[r]:t}}))},required:!0,className:"bg-green-50 p-2 outline-none border focus-within:border-primary-200 rounded"})]})),e.jsx("div",{onClick:()=>c(!0),className:" hover:bg-primary-200 bg-white py-1 px-3 w-32 text-center font-semibold border border-primary-200 hover:text-neutral-900 cursor-pointer rounded",children:"Add Fields"}),e.jsx("button",{className:"bg-primary-100 hover:bg-primary-200 py-2 rounded font-semibold",children:"Submit"})]})}),m&&e.jsx(O,{url:m,close:()=>p("")}),_&&e.jsx(M,{value:x,onChange:r=>b(r.target.value),submit:U,close:()=>c(!1)})]})};export{X as default};
