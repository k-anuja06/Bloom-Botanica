import{c as b,j as e,A as p,S as h,V as j,q as f,b as g,r as x}from"./index-DOuJ7_mk.js";import{u as y,A}from"./AddAddress-N2-s6T2h.js";import{M as v,a as N}from"./index-kC8JlUgJ.js";import{a as w}from"./index-Da9-5BbU.js";const S=({close:d,data:t})=>{const{fetchAddress:a}=b(),{register:o,handleSubmit:n,reset:c}=y({defaultValues:{_id:t._id,userId:t.userId,address_line:t.address_line,city:t.city,state:t.state,country:t.country,pincode:t.pincode,mobile:t.mobile}}),m=async i=>{try{const r=await p({...h.updateAddress,data:i}),{data:l}=r;l.success&&(j.success(l.message),c(),a(),d==null||d())}catch(r){f(r)}};return e.jsx("section",{className:"fixed inset-0 z-50 bg-black bg-opacity-70 h-screen overflow-auto flex items-start justify-center pt-8",children:e.jsxs("div",{className:"bg-white w-full max-w-lg p-6 rounded shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Edit Address"}),e.jsx("button",{onClick:d,className:"hover:text-red-500",children:e.jsx(w,{size:25})})]}),e.jsxs("form",{onSubmit:n(m),className:"space-y-4",children:[[{label:"Address Line",name:"address_line"},{label:"City",name:"city"},{label:"State",name:"state"},{label:"Pincode",name:"pincode"},{label:"Country",name:"country"},{label:"Mobile No.",name:"mobile"}].map(({label:i,name:r})=>e.jsxs("div",{className:"grid gap-1",children:[e.jsxs("label",{htmlFor:r,children:[i,":"]}),e.jsx("input",{id:r,type:"text",...o(r,{required:!0}),className:"border bg-green-50 p-2 rounded w-full"})]},r)),e.jsx("button",{type:"submit",className:"w-full py-2 bg-primary-200 font-semibold hover:bg-primary-100 transition-colors rounded",children:"Submit"})]})]})})},D=()=>{const d=g(s=>s.addresses.addressList),[t,a]=x.useState(!1),[o,n]=x.useState(!1),[c,m]=x.useState(null),{fetchAddress:i}=b(),r=async s=>{try{(await p({...h.disableAddress,data:{_id:s}})).data.success&&(j.success("Address removed"),i==null||i())}catch(u){f(u)}},l=s=>{m(s),n(!0)};return e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white shadow-lg px-4 py-3 flex justify-between items-center",children:[e.jsx("h2",{className:"font-semibold text-lg",children:"Saved Addresses"}),e.jsx("button",{onClick:()=>a(!0),className:"border border-primary-200 text-primary-200 px-3 py-1 rounded-full hover:bg-primary-200 hover:text-black transition",children:"Add Address"})]}),e.jsxs("div",{className:"bg-green-50 p-4 grid gap-4",children:[d.filter(s=>s.status).map((s,u)=>e.jsxs("div",{className:"bg-white border rounded p-4 flex justify-between items-start",children:[e.jsxs("div",{className:"text-sm leading-relaxed",children:[e.jsx("p",{children:s.address_line}),e.jsxs("p",{children:[s.city,", ",s.state]}),e.jsxs("p",{children:[s.country," - ",s.pincode]}),e.jsxs("p",{children:["Mobile: ",s.mobile]})]}),e.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[e.jsx("button",{onClick:()=>l(s),className:"bg-green-200 p-2 rounded hover:bg-green-600 hover:text-white transition",title:"Edit Address",children:e.jsx(v,{size:18})}),e.jsx("button",{onClick:()=>r(s._id),className:"bg-red-200 p-2 rounded hover:bg-red-600 hover:text-white transition",title:"Remove Address",children:e.jsx(N,{size:18})})]})]},s._id)),e.jsx("div",{onClick:()=>a(!0),className:"h-16 bg-green-50 border-2 border-dashed flex justify-center items-center cursor-pointer hover:bg-green-100 transition rounded",children:"+ Add New Address"})]}),t&&e.jsx(A,{close:()=>a(!1)}),o&&e.jsx(S,{data:c,close:()=>n(!1)})]})};export{D as default};
